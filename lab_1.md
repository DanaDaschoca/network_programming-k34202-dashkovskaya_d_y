# University: ITMO University

# Faculty: FICT

# Course: Network programming

# Year: 2024/2025

# Group: K34202

# Author: Dashkovskaya Dana

# Lab: Lab1

# Лабораторная работа №1 "Установка CHR и Ansible, настройка VPN"
## Описание
Данная работа предусматривает обучение развертыванию виртуальных машин (VM) и системы контроля конфигураций Ansible а также организации собственных VPN серверов.

## Цель работы
Целью данной работы является развертывание виртуальной машины на базе платформы Microsoft Azure с установленной системой контроля конфигураций Ansible и установка CHR в VirtualBox
## Ход работы
1) Нам нужно получить от сервера сертификаты и ключ, для того, чтобы клиент мог подключиться, чтобы сервер понимал, что это нужный клиент, а не сторонний. Для начала необходимо установить CHR и запустить его. Ниже на рисунке показано, что установка и запуск прошли успешно.
   
   ![VirtualBox_CHR_14_10_2024_18_03_46](https://github.com/user-attachments/assets/dda91669-2635-4598-9fd3-3a7a38646871)

2) Для выполнения работы был куплен сервер, на рисунке ниже показано как он называется и его ip адрес.
   
   ![VirtualBox_Danochka_14_10_2024_17_40_55](https://github.com/user-attachments/assets/8c0b5d49-ee45-46ce-b50d-b6702bc91731)

3) С помощью команды ```ssh root@80.249.146.241``` мы подключились к серверу. Именно для этого на прошлой картинке мы узнавали ip адрес. Теперь с помощью консоли можно писать всё, что нам нужно.
   
   ![VirtualBox_Danochka_14_10_2024_17_41_18](https://github.com/user-attachments/assets/7d617f41-6487-4126-9d6d-3d9c4be091dd)

4) Для дальнейших лабораторных работ нам будет необходим python и Ansible. Поэтом унеобходимо сразу их установить. Пример выполнения команд показан ниже.

   ![VirtualBox_Danochka_14_10_2024_17_43_19](https://github.com/user-attachments/assets/c7dd1dcf-d411-49b9-946b-a80bf258423a)

5) Теперь нам нужно поставить Winbox, чтобы подключиться к CHR, тогда у нас будет доступ к графическому интерфейсу. На рисунке в верхнем левом углу показан ip chr.

   ![VirtualBox_Danochka_14_10_2024_18_35_29](https://github.com/user-attachments/assets/cb80e502-a533-4802-92c3-66f5d49e41fc)

6) С помощью скрипта мы развернули сам ssh сервер. Также показан путь к конфигурации клиента. Этот файл нужно было передать клиенту, чтобы он смог ключи достать оттуда. Сервер развернут.
   
   ![VirtualBox_Danochka_14_10_2024_18_46_57](https://github.com/user-attachments/assets/622c21b4-baa9-49ef-aea7-f4e260546079)

7) Далее мы должны проверить статус сервера, чтобы понять, что он запущен. Статус: активно.

   ![VirtualBox_Danochka_14_10_2024_18_49_46](https://github.com/user-attachments/assets/2927423e-167d-4799-a7e9-664acf87eae3)

8) Далее можно увидеть ключи, которые были переданы клиенту. Т е мы достали ключи с сервера и завели их на клиента.

    ![VirtualBox_Danochka_14_10_2024_22_23_19](https://github.com/user-attachments/assets/025d0380-b32c-4bfe-8986-65de4162f0db)

9) Нужно проверить, что клиент подключен. Буква R показывает состояние running. Значит подключение есть.

    ![VirtualBox_Danochka_14_10_2024_22_26_42](https://github.com/user-attachments/assets/9b03e220-e738-4522-8645-b9c7680c6bb5)

10) Так как ключи показывает не стоит, так как это не для публичного доступа информация, то на рисунках ниже показан конфиг сервера и конфиг клиента. На рисунке показаны настройки порта, протокола, сертификата.

  ![VirtualBox_Danochka_14_10_2024_22_28_17](https://github.com/user-attachments/assets/26ced234-1fe1-41ac-b45f-a1fbd76461ff)

  ![VirtualBox_Danochka_14_10_2024_23_31_13](https://github.com/user-attachments/assets/60ba93e0-6afb-4f66-8b40-97b9dee6f778)

11) Для завершении лабораторной работы необходимо пропинговать. Результаты представлены ниже. У сервера адрес 10.8.0.1, у клиента 10.8.0.2 (Если бы у нас был бы еще один клиент, то у него было бы 10.8.0.3).

    ![VirtualBox_Danochka_14_10_2024_22_25_20](https://github.com/user-attachments/assets/bd1edcde-9eaa-4fc8-9840-f8e4ce2765d7)

    ![VirtualBox_Danochka_14_10_2024_22_26_08](https://github.com/user-attachments/assets/5077673f-eb5e-438f-8d88-8e923fd1c339)
## Вывод: 
В ходе лабораторной работы была настроена связь между сервером и клиентом. Также был установлен python и Ansible. Настройка связи была сделана с помощью сертификатов, которые необходимо было клиенту передать, также была произведена настйрока сервера и клиента через конфигурационные файлы. Сложность лабораторной работы заключалась в опечатках, которые были допущены из-за больших конфигурационных файлов, эти опечатки сложно было найти, что занимало много времени. 
